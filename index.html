<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>住 砖</title>
<style>
body{direction:rtl;font-family:Arial;background:#f5f5f5;padding:20px}
.box{background:#fff;max-width:700px;margin:auto;padding:20px;border-radius:8px}
label{font-weight:bold;display:block;margin-bottom:6px}
input,select,button{width:100%;padding:8px;font-size:16px;margin-bottom:12px}
pre{background:#eee;padding:10px;white-space:pre-wrap}
.secondary{background:#eee}
</style>
</head>
<body>

<div class="box">
<h2 id="title">注专转 住 砖</h2>
<div id="step"></div>
<button id="nextBtn">砖</button>

<pre id="output" style="display:none"></pre>
<button id="copyBtn" style="display:none"> 注转拽</button>
<button id="resetBtn" class="secondary" style="display:none"> 住</button>
</div>

<script>
/* ===== 转 ===== */
const companies=["专","","驻拽住","","砖专","","住","驻"," 驻转","专","专","拽专 砖转转 注 "];
const fundTypes=["拽驻转 ","拽专 砖转转","拽专 驻住","拽驻转  砖拽注","驻住转 住"];
const tracks=["转","Snp500","砖 住专","注拽  砖","转 住专","注拽  转","50% 转 50% snp500","33% 砖 住专 33%  转 34% snp500","50% 注拽  砖 50% snp500"];
const fees=["0.6%","0.7%","0.8%"];

/* ===== 爪 ===== */
let total=0, current=1, stepIndex=0, data={}, results=[];

/* ===== 专 ===== */
const steps=[
()=>askInput(" 驻注转 爪专 专砖?","count",true),
()=>askSelect(" 住 驻注?","action",["","砖专","驻转转 拽驻"]),
()=>askSelect(" 住 爪专?","fundType",fundTypes),
()=>askSelect(" 砖 专?","company",companies),

()=>{ if(data.action!=="驻转转 拽驻") askInput(" 住驻专 拽驻?","fundNumber"); else next(); },

()=>{ 
 if(data.action==="") askSelect(" 专 ?","targetCompany",companies);
 else if(data.action==="砖专") askSelect("  转 砖?","hasChange",["",""]);
 else next();
},

()=>{ 
 if(data.action==="") askSelect("砖专 住祝  砖拽注 ","investment",tracks);
 else if(data.hasChange==="") askSelect("住 砖","changeType",["砖 住 砖拽注"," 住"]);
 else next();
},

()=>{ 
 if(data.action==="") askSelect("  ?","fees",fees,true);
 else if(data.changeType==="砖 住 砖拽注") askSelect(" 住 ?","currentInvestment",tracks);
 else next();
},

()=>{ 
 if(data.changeType==="砖 住 砖拽注") askSelect(" 住 注专?","futureInvestment",tracks);
 else next();
},

()=>{ 
 if(data.action==="驻转转 拽驻") askSelect("砖专 住祝  砖拽注 ","investment",tracks);
 else next();
},

()=>{ 
 if(data.fundType==="拽驻转  砖拽注")
   askSelect("驻 驻拽","depositType",["专转 拽注","注专  驻注转",""]);
 else next();
},

()=>{ 
 if(data.depositType==="专转 拽注"||data.depositType==="注专  驻注转")
   askInput(" 住?","amount");
 else next();
},

()=>askSelect("  ?","fees",fees,true)
];

/* ===== 驻拽爪转 ===== */
function updateTitle(){
 title.textContent= total>1 ? `驻注 ${current} 转 ${total}` : "住 砖";
}

function askInput(label,key,isFirst=false){
 updateTitle();
 step.innerHTML=`<label>${label}</label><input id="value">`;
 nextBtn.onclick=()=>{
  if(!value.value.trim())return alert("砖 ");
  if(isFirst){ total=parseInt(value.value,10); next(); return; }
  data[key]=value.value.trim(); next();
 };
}

function askSelect(label,key,options,autoSave=false){
 updateTitle();
 step.innerHTML=`<label>${label}</label>
 <select id="value">${options.map(o=>`<option>${o}</option>`).join("")}</select>`;
 nextBtn.onclick=()=>{
  data[key]=value.value;
  autoSave?save():next();
 };
}

function next(){ stepIndex++; if(stepIndex<steps.length)steps[stepIndex](); }

function save(){
 let prefix = total>1 ? `${current}. ` : "";
 let line=prefix;

 if(data.action==="驻转转 拽驻"){
  line+=`驻转转 ${data.fundType} 专转 ${data.company} 砖专 住祝  砖拽注 ${data.investment}   ${data.fees}`;
 }
 else if(data.action===""){
  line+=`${data.company} ${data.fundType}`;
  if(total>1) line+=` 住驻专 拽驻 ${data.fundNumber}-`;
  line+=` 转 专转 ${data.targetCompany} 砖专 住祝  砖拽注 ${data.investment}   ${data.fees}`;
 }
 else{
  line+=`${data.company} ${data.fundType}`;
  if(total>1) line+=` 住驻专 拽驻 ${data.fundNumber}-`;
  if(data.hasChange==="") line+=" 转砖专  砖";
  else if(data.changeType===" 住") line+=" 转砖专 转 专 注  住";
  else line+=` 转砖专 转 专 砖专 转爪注 砖 住 ${data.currentInvestment} ${data.futureInvestment}`;
 }

 if(data.depositType==="专转 拽注") line+=` 注 专转 拽注 住 ${data.amount} `;
 if(data.depositType==="注专  驻注转") line+=` 注 注专  驻注转 住 ${data.amount} `;

 results.push(line);

 if(current<total){ current++; data={}; stepIndex=1; steps[1](); }
 else finish();
}

function finish(){
 output.textContent="住 砖:\n\n"+results.join("\n");
 step.style.display=nextBtn.style.display="none";
 output.style.display=copyBtn.style.display=resetBtn.style.display="block";
 copyBtn.onclick=()=>navigator.clipboard.writeText(output.textContent);
 resetBtn.onclick=()=>location.reload();
}

steps[0]();
</script>

</body>
</html>