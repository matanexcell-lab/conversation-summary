<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>×¡×™×›×•× ×©×™×—×”</title>
<style>
body{
  direction:rtl;
  font-family:Arial;
  background:#f5f5f5;
  padding:20px
}
.box{
  background:#fff;
  max-width:760px;
  margin:auto;
  padding:20px;
  border-radius:8px
}
label{
  font-weight:bold;
  display:block;
  margin-bottom:6px
}
input,select,button{
  width:100%;
  padding:10px;
  font-size:16px;
  margin-bottom:12px
}
button{cursor:pointer}
pre{
  background:#eee;
  padding:12px;
  white-space:pre-wrap
}
.secondary{background:#eee}
</style>
</head>
<body>

<div class="box">
<h2 id="title">×¡×™×›×•× ×©×™×—×”</h2>
<div id="step"></div>
<button id="nextBtn">×”××©×š</button>

<pre id="output" style="display:none"></pre>
<button id="copyBtn" style="display:none">ğŸ“‹ ×”×¢×ª×§</button>
<button id="resetBtn" class="secondary" style="display:none">ğŸ” ×¡×™×•×</button>
</div>

<script>
/* ===== × ×ª×•× ×™× ===== */

const actions=["× ×™×•×“","×”×©××¨×”","×¤×ª×™×—×ª ×§×•×¤×”","×¤×¨×˜"];

const insuranceCompanies=[
 "××’×“×œ","×× ×•×¨×”","×”×¤× ×™×§×¡","×”×›×©×¨×”","×‘×™×˜×•×— ×™×©×™×¨","×›×œ×œ","××™×™×œ×•×Ÿ"
];

const privatePolicies=[
 "×¤×•×œ×™×¡×ª ××©×›× ×ª×",
 "×¤×•×œ×™×¡×ª ×—×™×™×",
 "×¤×•×œ×™×¡×ª ×—×™×™× ××©×•×¢×‘×“×ª",
 "×‘×™×˜×•×— ×‘×¨×™××•×ª",
 "×‘×™×˜×•×— ×‘×¨×™××•×ª ×•××—×œ×•×ª ×§×©×•×ª"
];

const privateActions=["×œ×‘×˜×œ","×œ×”×©××™×¨","×œ×”×¤×™×§ ×—×“×©"];

/* ===== ××¦×‘ ===== */
let total=0,current=1,stepIndex=0;
let data={},results=[];

/* ===== ×©×œ×‘×™× ×¨××©×™×™× ===== */
const steps=[
 ()=>askInput("×›××” ×¤×¢×•×œ×•×ª ×¦×¨×™×š ×œ×¨×©×•×?","count",true),
 ()=>askSelect("××” ×¡×•×’ ×”×¤×¢×•×œ×”?","action",actions),
 ()=>routeAction()
];

/* ===== × ×™×•×•×˜ ×œ×¤×™ ×¡×•×’ ×¤×¢×•×œ×” ===== */
function routeAction(){
 if(data.action==="×¤×¨×˜"){
   stepIndex=100;
   privateSteps[0]();
   return;
 }
 // ×›×¨×’×¢ ××˜×¤×œ×™× ×¨×§ ×‘×¤×¨×˜ â€“ ×©××¨ ×”×¤×¢×•×œ×•×ª ×™×ª×•×•×¡×¤×• ×‘×”××©×š
 data={};
 stepIndex=1;
 steps[1]();
}

/* ===== ×©×œ×‘×™ ×¤×¨×˜ ===== */
const privateSteps=[
 ()=>askSelect("××” ×¡×•×’ ×”×¤×•×œ×™×¡×”?","policyType",privatePolicies),
 ()=>askSelect("××” ×œ×‘×¦×¢ ×‘×¤×•×œ×™×¡×”?","policyAction",privateActions),
 ()=>askSelect("××” ×©× ×—×‘×¨×ª ×”×‘×™×˜×•×—?","company",insuranceCompanies),
 ()=>{
   if(data.policyAction==="×œ×”×¤×™×§ ×—×“×©"){
     askInput("××” ×”×¤×¨××™×” ×”×—×•×“×©×™×ª?","monthlyPremium",false,true);
   } else {
     askInput("××” ××¡×¤×¨ ×”×¤×•×œ×™×¡×”?","policyNumber",false,true);
   }
 }
];

/* ===== ×¤×•× ×§×¦×™×•×ª UI ===== */
function updateTitle(){
 title.textContent = total>1 ? `×¤×¢×•×œ×” ${current} ××ª×•×š ${total}` : "×¡×™×›×•× ×©×™×—×”";
}

function askInput(label,key,isFirst=false,autoSave=false){
 updateTitle();
 step.innerHTML=`<label>${label}</label><input id="value">`;
 nextBtn.onclick=()=>{
   if(!value.value.trim()) return alert("×™×© ×œ××œ×");
   if(isFirst){
     total=parseInt(value.value,10);
     next();
     return;
   }
   data[key]=value.value.trim();
   autoSave ? save() : next();
 };
}

function askSelect(label,key,options){
 updateTitle();
 step.innerHTML=`<label>${label}</label>
 <select id="value">
 ${options.map(o=>`<option>${o}</option>`).join("")}
 </select>`;
 nextBtn.onclick=()=>{
   data[key]=value.value;
   next();
 };
}

function next(){
 stepIndex++;
 if(stepIndex<steps.length){
   steps[stepIndex]();
 }
 else if(stepIndex>=100){
   let i=stepIndex-100;
   if(i<privateSteps.length) privateSteps[i]();
 }
}

/* ===== ×©××™×¨×” ===== */
function save(){
 let prefix = total>1 ? `${current}. ` : "";
 let line = prefix;

 if(data.policyAction==="×œ×‘×˜×œ"){
   line+=`${data.policyType} ×‘×—×‘×¨×ª ${data.company} ××¡×¤×¨ ×¤×•×œ×™×¡×” ${data.policyNumber} â€“ ×ª×‘×•×˜×œ`;
 }
 else if(data.policyAction==="×œ×”×©××™×¨"){
   line+=`${data.policyType} ×‘×—×‘×¨×ª ${data.company} ××¡×¤×¨ ×¤×•×œ×™×¡×” ${data.policyNumber} â€“ ×ª×™×©××¨`;
 }
 else{
   line+=`×ª×•×¤×§ ×¤×•×œ×™×¡×” ×—×“×©×” ×©×œ ${data.policyType} ×‘×—×‘×¨×ª ${data.company} ×‘×¤×¨××™×” ×—×•×“×©×™×ª ×©×œ ${data.monthlyPremium} â‚ª`;
 }

 results.push(line);

 if(current<total){
   current++;
   data={};
   stepIndex=1;
   steps[1]();
 } else {
   finish();
 }
}

/* ===== ×¡×™×•× ===== */
function finish(){
 output.textContent=
`×‘×”××©×š ×œ×©×™×—×ª× ×•
×¡×•×›× ×¢×œ ×”×“×‘×¨×™× ×”×‘××™×:

${results.join("\n")}`;
 step.style.display="none";
 nextBtn.style.display="none";
 output.style.display="block";
 copyBtn.style.display="block";
 resetBtn.style.display="block";

 copyBtn.onclick=()=>navigator.clipboard.writeText(output.textContent);
 resetBtn.onclick=()=>location.reload();
}

/* ===== ×”×ª×—×œ×” ===== */
steps[0]();
</script>

</body>
</html>