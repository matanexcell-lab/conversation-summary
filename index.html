<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>×¡×™×›×•× ×©×™×—×”</title>
<style>
body{direction:rtl;font-family:Arial;background:#f5f5f5;padding:20px}
.box{background:#fff;max-width:760px;margin:auto;padding:20px;border-radius:8px}
label{font-weight:bold;display:block;margin-bottom:6px}
input,select,button{width:100%;padding:8px;font-size:16px;margin-bottom:12px}
pre{background:#eee;padding:10px;white-space:pre-wrap}
.secondary{background:#eee}
</style>
</head>
<body>

<div class="box">
<h2 id="title">××¢×¨×›×ª ×¡×™×›×•× ×©×™×—×”</h2>
<div id="step"></div>
<button id="nextBtn">×”××©×š</button>

<pre id="output" style="display:none"></pre>
<button id="copyBtn" style="display:none">ğŸ“‹ ×”×¢×ª×§</button>
<button id="resetBtn" class="secondary" style="display:none">ğŸ” ×¡×™×•×</button>
</div>

<script>
/* ===== × ×ª×•× ×™× ===== */
const companies=["×”×¨××œ","××’×“×œ","×”×¤× ×™×§×¡","×›×œ×œ","××œ×˜×©×•×œ×¨","××™×˜×‘","×× ×œ×™×¡×˜","××™× ×¤×™× ×™×˜×™","×™×œ×™×Ÿ ×œ×¤×™×“×•×ª","××•×¨","×× ×•×¨×”","×§×¨×Ÿ ×”×©×ª×œ××•×ª ×œ×¢×•×‘×“×™ ×”××“×™× ×”"];

const fundTypes=[
 "×§×•×¤×ª ×’××œ","×§×¨×Ÿ ×”×©×ª×œ××•×ª","×§×¨×Ÿ ×¤× ×¡×™×”",
 "×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”","×¤×•×œ×™×¡×ª ×—×™×¡×›×•×Ÿ","×¤×¨×˜"
];

const privatePolicies=[
 "×¤×•×œ×™×¡×ª ××©×›× ×ª×",
 "×¤×•×œ×™×¡×ª ×—×™×™×",
 "×¤×•×œ×™×¡×ª ×—×™×™× ××©×•×¢×‘×“",
 "×‘×™×˜×•×— ×‘×¨×™××•×ª",
 "×‘×™×˜×•×— ×‘×¨×™××•×ª ×•××—×œ×•×ª ×§×©×•×ª"
];

const privateActions=["×œ×‘×˜×œ","×œ×”×©××™×¨","×œ×”×¤×™×§ ×—×“×©"];

const tracks=[
 "×× ×™×•×ª","Snp500","××©×•×œ×‘ ×¡×—×™×¨","×¢×•×§×‘ ××“×“×™× ×’××™×©",
 "×× ×™×•×ª ×¡×—×™×¨","×¢×•×§×‘ ××“×“×™ ×× ×™×•×ª"
];

const fees=["0.6%","0.7%","0.8%"];

/* ===== ××¦×‘ ===== */
let total=0,current=1,stepIndex=0,data={},results=[];

/* ===== ×–×¨×™××” ===== */
const steps=[
()=>askInput("×›××” ×¤×¢×•×œ×•×ª ×¦×¨×™×š ×œ×¨×©×•×?","count",true),
()=>askSelect("××” ×¡×•×’ ×”×¤×¢×•×œ×”?","action",["×œ× ×™×™×“","×œ×”×©××™×¨","×¤×ª×™×—×ª ×§×•×¤×”"]),
()=>askSelect("××” ×¡×•×’ ×”××•×¦×¨?","fundType",fundTypes),
()=>askSelect("××” ×©× ×”×—×‘×¨×”?","company",companies),

/* ===== ×¤×¨×˜ ===== */
()=>{ if(data.fundType==="×¤×¨×˜") askSelect("××” ×¡×•×’ ×”×¤×•×œ×™×¡×”?","policyType",privatePolicies); else next(); },
()=>{ if(data.fundType==="×¤×¨×˜") askSelect("××” ×œ×‘×¦×¢ ×‘×¤×•×œ×™×¡×”?","policyAction",privateActions); else next(); },

()=>{ 
 if(data.fundType==="×¤×¨×˜" && data.policyAction!=="×œ×”×¤×™×§ ×—×“×©")
   askInput("××” ××¡×¤×¨ ×”×¤×•×œ×™×¡×”?","policyNumber",false,true);
 else if(data.fundType==="×¤×¨×˜" && data.policyAction==="×œ×”×¤×™×§ ×—×“×©")
   askInput("××” ×”×¤×¨××™×” ×”×—×•×“×©×™×ª?","monthlyPremium",false,true);
 else next();
},

/* ===== ×—×™×¡×›×•×Ÿ ===== */
()=>{ if(data.fundType!=="×¤×¨×˜" && data.action!=="×¤×ª×™×—×ª ×§×•×¤×”") askInput("××” ××¡×¤×¨ ×”×§×•×¤×”?","fundNumber"); else next(); },

()=>{ 
 if(data.fundType==="×¤×¨×˜") next();
 else if(data.action==="×œ× ×™×™×“") askSelect("×œ××™×–×• ×—×‘×¨×” ×œ× ×™×™×“?","targetCompany",companies);
 else if(data.action==="×œ×”×©××™×¨") askSelect("×”×× ×”×•×œ×š ×œ×”×™×•×ª ×©×™× ×•×™?","hasChange",["×›×Ÿ","×œ×"]);
 else next();
},

()=>{ 
 if(data.fundType==="×¤×¨×˜") next();
 else if(data.action==="×œ× ×™×™×“") askSelect("××¡×œ×•×œ ×”×©×§×¢×”","investment",tracks);
 else if(data.hasChange==="×›×Ÿ") askSelect("×¡×•×’ ×©×™× ×•×™","changeType",["×©×™× ×•×™ ××¡×œ×•×œ ×”×©×§×¢×”","××™× ×•×™ ×¡×•×›×Ÿ"]);
 else next();
},

()=>{ 
 if(data.fundType==="×¤×¨×˜") next();
 else if(data.action==="×œ× ×™×™×“") askSelect("××” ×“××™ ×”× ×™×”×•×œ?","fees",fees,true);
 else if(data.changeType==="×©×™× ×•×™ ××¡×œ×•×œ ×”×©×§×¢×”") askSelect("××” ×”××¡×œ×•×œ ×”× ×•×›×—×™?","currentInvestment",tracks);
 else next();
},

()=>{ 
 if(data.changeType==="×©×™× ×•×™ ××¡×œ×•×œ ×”×©×§×¢×”") askSelect("×œ××™×–×” ××¡×œ×•×œ ×™×¢×‘×•×¨?","futureInvestment",tracks);
 else next();
},

()=>{ 
 if(data.action==="×¤×ª×™×—×ª ×§×•×¤×”" && data.fundType!=="×¤×¨×˜") askSelect("××¡×œ×•×œ ×”×©×§×¢×”","investment",tracks);
 else next();
},

()=>{ if(data.fundType!=="×¤×¨×˜") askSelect("××” ×“××™ ×”× ×™×”×•×œ?","fees",fees,true); }
];

/* ===== ×¤×•× ×§×¦×™×•×ª ===== */
function updateTitle(){
 title.textContent= total>1 ? `×¤×¢×•×œ×” ${current} ××ª×•×š ${total}` : "×¡×™×›×•× ×©×™×—×”";
}

function askInput(label,key,isFirst=false,autoSave=false){
 updateTitle();
 step.innerHTML=`<label>${label}</label><input id="value">`;
 nextBtn.onclick=()=>{
  if(!value.value.trim())return alert("×™×© ×œ××œ×");
  if(isFirst){ total=parseInt(value.value,10); next(); return; }
  data[key]=value.value.trim();
  autoSave ? save() : next();
 };
}

function askSelect(label,key,options,autoSave=false){
 updateTitle();
 step.innerHTML=`<label>${label}</label>
 <select id="value">${options.map(o=>`<option>${o}</option>`).join("")}</select>`;
 nextBtn.onclick=()=>{
  data[key]=value.value;
  autoSave?save():next();
 };
}

function next(){ stepIndex++; if(stepIndex<steps.length)steps[stepIndex](); }

/* ===== ×©××™×¨×” ===== */
function save(){
 let prefix = total>1 ? `${current}. ` : "";
 let line=prefix;

 if(data.fundType==="×¤×¨×˜"){
  line+=`${data.policyType} ×‘×—×‘×¨×ª ${data.company}`;
  if(data.policyAction!=="×œ×”×¤×™×§ ×—×“×©"){
    line+=` ××¡×¤×¨ ×¤×•×œ×™×¡×” ${data.policyNumber} â€“ ${data.policyAction}`;
  } else {
    line+=` â€“ ×œ×”×¤×™×§ ×—×“×© ×¢× ×¤×¨××™×” ×—×•×“×©×™×ª ×‘×¡×›×•× ×©×œ ${data.monthlyPremium} â‚ª`;
  }
 }
 else if(data.action==="×¤×ª×™×—×ª ×§×•×¤×”"){
  line+=`×¤×ª×™×—×ª ${data.fundType} ×‘×—×‘×¨×ª ${data.company} ×›××©×¨ ×”×›×¡×£ ×™×•×©×§×¢ ×‘××¡×œ×•×œ ×”×©×§×¢×” ${data.investment} ×‘×“××™ × ×™×”×•×œ ${data.fees}`;
 }
 else if(data.action==="×œ× ×™×™×“"){
  line+=`${data.company} ${data.fundType} ××¡×¤×¨ ×§×•×¤×” ${data.fundNumber}- ×ª× ×•×™×“ ×œ×—×‘×¨×ª ${data.targetCompany} ×›××©×¨ ×”×›×¡×£ ×™×•×©×§×¢ ×‘××¡×œ×•×œ ×”×©×§×¢×” ${data.investment} ×‘×“××™ × ×™×”×•×œ ${data.fees}`;
 }
 else{
  line+=`${data.company} ${data.fundType} ××¡×¤×¨ ×§×•×¤×” ${data.fundNumber}`;
  if(data.hasChange==="×œ×") line+=" â€“ ×ª×™×©××¨ ×œ×œ× ×©×™× ×•×™";
  else if(data.changeType==="××™× ×•×™ ×¡×•×›×Ÿ") line+=" â€“ ×ª×™×©××¨ ×‘××•×ª×” ×—×‘×¨×” ×¢× ××™× ×•×™ ×¡×•×›×Ÿ";
  else line+=` â€“ ×ª×™×©××¨ ×‘××•×ª×” ×—×‘×¨×” ×›××©×¨ ×™×ª×‘×¦×¢ ×©×™× ×•×™ ××¡×œ×•×œ ×${data.currentInvestment} ×œ${data.futureInvestment}`;
 }

 results.push(line);

 if(current<total){ current++; data={}; stepIndex=1; steps[1](); }
 else finish();
}

function finish(){
 output.textContent=results.join("\n");
 step.style.display=nextBtn.style.display="none";
 output.style.display=copyBtn.style.display=resetBtn.style.display="block";
 copyBtn.onclick=()=>navigator.clipboard.writeText(output.textContent);
 resetBtn.onclick=()=>location.reload();
}

steps[0]();
</script>

</body>
</html>