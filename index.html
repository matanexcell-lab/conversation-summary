<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>×¡×™×›×•× ×©×™×—×”</title>
<style>
body{direction:rtl;font-family:Arial;background:#f5f5f5;padding:20px}
.box{background:#fff;max-width:760px;margin:auto;padding:20px;border-radius:8px}
label{font-weight:bold;display:block;margin-bottom:6px}
input,select,button{width:100%;padding:10px;font-size:16px;margin-bottom:12px}
pre{background:#eee;padding:12px;white-space:pre-wrap}
.secondary{background:#eee}
</style>
</head>
<body>

<div class="box">
<h2 id="title">×¡×™×›×•× ×©×™×—×”</h2>
<div id="step"></div>
<button id="nextBtn">×”××©×š</button>

<pre id="output" style="display:none"></pre>
<button id="copyBtn" style="display:none">ğŸ“‹ ×”×¢×ª×§</button>
<button id="resetBtn" class="secondary" style="display:none">ğŸ” ×¡×™×•×</button>
</div>

<script>
/* ===== × ×ª×•× ×™× ===== */

const actions=["× ×™×•×“","×”×©××¨×”","×¤×ª×™×—×ª ×§×•×¤×”","×¤×¨×˜"];

const insuranceCompanies=[
 "××’×“×œ","×× ×•×¨×”","×”×¤× ×™×§×¡","×”×›×©×¨×”","×‘×™×˜×•×— ×™×©×™×¨","×›×œ×œ","××™×™×œ×•×Ÿ"
];

const privatePolicies=[
 "×¤×•×œ×™×¡×ª ××©×›× ×ª×",
 "×¤×•×œ×™×¡×ª ×—×™×™×",
 "×¤×•×œ×™×¡×ª ×—×™×™× ××©×•×¢×‘×“×ª",
 "×‘×™×˜×•×— ×‘×¨×™××•×ª",
 "×‘×™×˜×•×— ×‘×¨×™××•×ª ×•××—×œ×•×ª ×§×©×•×ª"
];

const privateActions=["×œ×‘×˜×œ","×œ×”×©××™×¨","×œ×”×¤×™×§ ×—×“×©"];

/* ===== ××¦×‘ ===== */
let total=0,current=1;
let data={},results=[];
let flow=[],flowIndex=0;

/* ===== ×”×ª×—×œ×” ===== */
start();

function start(){
 askInput("×›××” ×¤×¢×•×œ×•×ª ×¦×¨×™×š ×œ×¨×©×•×?","count",true);
}

/* ===== ×‘×—×™×¨×ª ×¤×¢×•×œ×” ===== */
function chooseAction(){
 askSelect("××” ×¡×•×’ ×”×¤×¢×•×œ×”?","action",actions,()=>{
   if(data.action==="×¤×¨×˜") buildPrivateFlow();
   else buildSimpleFlow();
   nextInFlow();
 });
}

/* ===== ×–×¨×™××” ×œ×¤×¨×˜ ===== */
function buildPrivateFlow(){
 flow=[
  ()=>askSelect("××” ×¡×•×’ ×”×¤×•×œ×™×¡×”?","policyType",privatePolicies,nextInFlow),
  ()=>askSelect("××” ×œ×‘×¦×¢ ×‘×¤×•×œ×™×¡×”?","policyAction",privateActions,nextInFlow),
  ()=>askSelect("××” ×©× ×—×‘×¨×ª ×”×‘×™×˜×•×—?","company",insuranceCompanies,nextInFlow),
  ()=>{
    if(data.policyAction==="×œ×”×¤×™×§ ×—×“×©")
      askInput("××” ×”×¤×¨××™×” ×”×—×•×“×©×™×ª?","monthlyPremium",false,save);
    else
      askInput("××” ××¡×¤×¨ ×”×¤×•×œ×™×¡×”?","policyNumber",false,save);
  }
 ];
 flowIndex=0;
}

/* ===== ×–×¨×™××” ×¤×©×•×˜×” (× ×™×•×“ / ×”×©××¨×” / ×¤×ª×™×—×ª ×§×•×¤×”) ===== */
function buildSimpleFlow(){
 flow=[
  ()=>askInput("×ª×™××•×¨ ×§×¦×¨ ×œ×¤×¢×•×œ×”","description",false,save)
 ];
 flowIndex=0;
}

/* ===== ×ª× ×•×¢×” ×‘×–×¨×™××” ===== */
function nextInFlow(){
 if(flowIndex<flow.length){
   flow[flowIndex++]();
 }
}

/* ===== UI ===== */
function updateTitle(){
 title.textContent = total>1 ? `×¤×¢×•×œ×” ${current} ××ª×•×š ${total}` : "×¡×™×›×•× ×©×™×—×”";
}

function askInput(label,key,isFirst=false,onDone){
 updateTitle();
 step.innerHTML=`<label>${label}</label><input id="value">`;
 nextBtn.onclick=()=>{
   if(!value.value.trim()) return alert("×™×© ×œ××œ×");
   if(isFirst){
     total=parseInt(value.value,10);
     data={};
     chooseAction();
     return;
   }
   data[key]=value.value.trim();
   onDone ? onDone() : null;
 };
}

function askSelect(label,key,options,onDone){
 updateTitle();
 step.innerHTML=`<label>${label}</label>
 <select id="value">${options.map(o=>`<option>${o}</option>`).join("")}</select>`;
 nextBtn.onclick=()=>{
   data[key]=value.value;
   onDone ? onDone() : null;
 };
}

/* ===== ×©××™×¨×” ===== */
function save(){
 let prefix = total>1 ? `${current}. ` : "";
 let line = prefix;

 if(data.action==="×¤×¨×˜"){
   if(data.policyAction==="×œ×‘×˜×œ"){
     line+=`${data.policyType} ×‘×—×‘×¨×ª ${data.company} ××¡×¤×¨ ×¤×•×œ×™×¡×” ${data.policyNumber} â€“ ×ª×‘×•×˜×œ`;
   }
   else if(data.policyAction==="×œ×”×©××™×¨"){
     line+=`${data.policyType} ×‘×—×‘×¨×ª ${data.company} ××¡×¤×¨ ×¤×•×œ×™×¡×” ${data.policyNumber} â€“ ×ª×™×©××¨`;
   }
   else{
     line+=`×ª×•×¤×§ ×¤×•×œ×™×¡×” ×—×“×©×” ×©×œ ${data.policyType} ×‘×—×‘×¨×ª ${data.company} ×‘×¤×¨××™×” ×—×•×“×©×™×ª ×©×œ ${data.monthlyPremium} â‚ª`;
   }
 } else {
   line+=`${data.action}: ${data.description}`;
 }

 results.push(line);

 if(current<total){
   current++;
   data={};
   chooseAction();
 } else {
   finish();
 }
}

/* ===== ×¡×™×•× ===== */
function finish(){
 output.textContent=
`×‘×”××©×š ×œ×©×™×—×ª× ×•
×¡×•×›× ×¢×œ ×”×“×‘×¨×™× ×”×‘××™×:

${results.join("\n")}`;
 step.style.display=nextBtn.style.display="none";
 output.style.display=copyBtn.style.display=resetBtn.style.display="block";
 copyBtn.onclick=()=>navigator.clipboard.writeText(output.textContent);
 resetBtn.onclick=()=>location.reload();
}
</script>

</body>
</html>