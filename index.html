<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8" />
<title>×¡×™×›×•× ×©×™×—×”</title>
<style>
  body{direction:rtl;font-family:Arial;background:#f5f5f5;padding:20px}
  .box{background:#fff;max-width:820px;margin:auto;padding:20px;border-radius:10px}
  h2{margin-top:0}
  label{font-weight:bold;display:block;margin-bottom:6px}
  input,select,button{width:100%;padding:10px;font-size:16px;margin-bottom:12px;box-sizing:border-box}
  button{cursor:pointer}
  pre{background:#eee;padding:12px;white-space:pre-wrap;border-radius:8px}
  .secondary{background:#eee}
</style>
</head>
<body>

<div class="box">
  <h2 id="title">×¡×™×›×•× ×©×™×—×”</h2>
  <div id="step"></div>
  <button id="nextBtn">×”××©×š</button>

  <pre id="output" style="display:none"></pre>
  <button id="copyBtn" style="display:none">ğŸ“‹ ×”×¢×ª×§</button>
  <button id="resetBtn" class="secondary" style="display:none">ğŸ” ×¡×™×•×</button>
</div>

<script>
/* =======================
   CONFIG / OPTIONS
======================= */

const ACTIONS = ["× ×™×•×“","×”×©××¨×”","×¤×ª×™×—×ª ×§×•×¤×”","×¤×¨×˜"];

const INVESTMENT_COMPANIES = [
  "×”×¨××œ","×›×œ×œ","×”×¤× ×™×§×¡","××’×“×œ","××•×¨","××œ×˜×©×•×œ×¨ ×©×—×","×× ×œ×™×¡×˜","×™×œ×™×Ÿ ×œ×¤×™×“×•×ª","××™× ×¤×™× ×™×˜×™","××™×˜×‘ ×“×©","×”×›×©×¨×”","×× ×•×¨×”"
];

const INSURANCE_COMPANIES = [
  "××’×“×œ","×× ×•×¨×”","×”×¤× ×™×§×¡","×”×›×©×¨×”","×‘×™×˜×•×— ×™×©×™×¨","×›×œ×œ","××™×™×œ×•×Ÿ"
];

const FUND_TYPES = [
  "×§×•×¤×ª ×’××œ",
  "×§×¨×Ÿ ×”×©×ª×œ××•×ª",
  "×§×¨×Ÿ ×¤× ×¡×™×”",
  "×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”",
  "×¤×•×œ×™×¡×ª ×—×™×¡×›×•×Ÿ"
];

const TRACKS = [
  "×× ×™×•×ª",
  "Snp500",
  "××©×•×œ×‘ ×¡×—×™×¨",
  "×¢×•×§×‘ ××“×“×™× ×’××™×©",
  "×× ×™×•×ª ×¡×—×™×¨",
  "×¢×•×§×‘ ××“×“×™ ×× ×™×•×ª",
  "50% ×× ×™×•×ª 50% snp500",
  "×”×©×œ×•×© ×”×§×“×•×©",
  "×—×¦×™ ×—×¦×™ ×× ×œ×™×¡×˜"
];

const FEES = ["0.6%","0.7%","0.8%"];

const PRIVATE_POLICIES = [
  "×¤×•×œ×™×¡×ª ××©×›× ×ª×",
  "×¤×•×œ×™×¡×ª ×—×™×™×",
  "×¤×•×œ×™×¡×ª ×—×™×™× ××©×•×¢×‘×“×ª",
  "×‘×™×˜×•×— ×‘×¨×™××•×ª",
  "×‘×™×˜×•×— ×‘×¨×™××•×ª ×•××—×œ×•×ª ×§×©×•×ª"
];

const PRIVATE_ACTIONS = ["×œ×‘×˜×œ","×œ×”×©××™×¨","×œ×”×¤×™×§ ×—×“×©"];

const KGI_PAY_OPTIONS = ["××™×Ÿ","×”×•×¨××ª ×§×‘×¢","×”×¢×‘×¨×” ×—×“ ×¤×¢××™×ª"];

/* =======================
   STATE
======================= */

let total = 0;
let current = 1;

let data = {};
let results = [];

let flow = [];
let flowIndex = 0;

/* =======================
   BOOT
======================= */

askInput("×›××” ×¤×¢×•×œ×•×ª ×¦×¨×™×š ×œ×¨×©×•×?","count",true);

/* =======================
   UI HELPERS
======================= */

function updateTitle(){
  title.textContent = total > 1 ? `×¤×¢×•×œ×” ${current} ××ª×•×š ${total}` : "×¡×™×›×•× ×©×™×—×”";
}

function askInput(label, key, isFirst=false, autoDoneFn=null){
  updateTitle();
  step.innerHTML = `<label>${label}</label><input id="value" />`;
  nextBtn.onclick = () => {
    const v = value.value.trim();
    if(!v) return alert("×™×© ×œ××œ×");
    if(isFirst){
      total = parseInt(v,10);
      if(!Number.isFinite(total) || total<=0) return alert("××¡×¤×¨ ×œ× ×ª×§×™×Ÿ");
      data = {};
      chooseAction();
      return;
    }
    data[key] = v;
    if(autoDoneFn) autoDoneFn();
    else nextInFlow();
  };
}

function askSelect(label, key, options, autoDoneFn=null, includeOther=false){
  updateTitle();

  let opts = options.slice();
  if(includeOther) opts = opts.concat(["××—×¨"]);

  step.innerHTML = `
    <label>${label}</label>
    <select id="value">
      ${opts.map(o=>`<option>${o}</option>`).join("")}
    </select>
    <div id="otherBox" style="display:none"></div>
  `;

  const selectEl = document.getElementById("value");
  const otherBox = document.getElementById("otherBox");

  function renderOther(){
    if(selectEl.value === "××—×¨"){
      otherBox.style.display = "block";
      otherBox.innerHTML = `<label>×¨×©×•× ××œ×œ ×—×•×¤×©×™</label><input id="otherValue" />`;
    } else {
      otherBox.style.display = "none";
      otherBox.innerHTML = "";
    }
  }
  selectEl.onchange = renderOther;
  renderOther();

  nextBtn.onclick = () => {
    if(selectEl.value === "××—×¨"){
      const otherValue = document.getElementById("otherValue");
      const txt = (otherValue?.value || "").trim();
      if(!txt) return alert("×™×© ×œ××œ× ××œ×œ ×—×•×¤×©×™");
      data[key] = txt;
    } else {
      data[key] = selectEl.value;
    }
    if(autoDoneFn) autoDoneFn();
    else nextInFlow();
  };
}

/* =======================
   FLOW CONTROL
======================= */

function chooseAction(){
  askSelect("××” ×¡×•×’ ×”×¤×¢×•×œ×”?","action",ACTIONS,()=>{
    buildFlowForAction();
    nextInFlow();
  });
}

function nextInFlow(){
  if(flowIndex < flow.length){
    flow[flowIndex++]();
  }
}

/* =======================
   BUILD FLOWS
======================= */

function buildFlowForAction(){
  flow = [];
  flowIndex = 0;

  if(data.action === "× ×™×•×“"){
    flow = [
      () => askSelect("××” ×©× ×”×—×‘×¨×” ×”× ×•×›×—×™×ª?","company",INVESTMENT_COMPANIES,nextInFlow,true),
      () => askSelect("××” ×¡×•×’ ×”×§×•×¤×”?","fundType",FUND_TYPES,nextInFlow,true),
      () => askInput("××” ××¡×¤×¨ ×”×§×•×¤×”?","fundNumber",false,nextInFlow),
      () => askSelect("×œ××™×–×• ×—×‘×¨×” ×œ× ×™×™×“?","targetCompany",INVESTMENT_COMPANIES,nextInFlow,true),
      () => askSelect("××” ××¡×œ×•×œ ×”×”×©×§×¢×”?","investment",TRACKS,nextInFlow,true),
      () => askSelect("××” ×“××™ ×”× ×™×”×•×œ?","fees",FEES,save,false)
    ];
    return;
  }

  if(data.action === "×”×©××¨×”"){
    flow = [
      () => askSelect("××” ×©× ×”×—×‘×¨×”?","company",INVESTMENT_COMPANIES,nextInFlow,true),
      () => askSelect("××” ×¡×•×’ ×”×§×•×¤×”?","fundType",FUND_TYPES,nextInFlow,true),
      () => askInput("××” ××¡×¤×¨ ×”×§×•×¤×”?","fundNumber",false,nextInFlow),
      () => askSelect("×”×× ×”×•×œ×š ×œ×”×™×•×ª ×©×™× ×•×™?","hasChange",["×›×Ÿ","×œ×"],()=>{
        if(data.hasChange === "×›×Ÿ"){
          nextInFlow(); // ×œ××¡×œ×•×œ × ×•×›×—×™
        } else {
          save();
        }
      }),
      () => askSelect("××” ×”××¡×œ×•×œ ×”× ×•×›×—×™?","currentInvestment",TRACKS,nextInFlow,true),
      () => askSelect("×œ××™×–×” ××¡×œ×•×œ ×™×¢×‘×•×¨?","futureInvestment",TRACKS,save,true)
    ];
    return;
  }

  if(data.action === "×¤×ª×™×—×ª ×§×•×¤×”"){
    flow = [
      () => askSelect("××” ×¡×•×’ ×”××•×¦×¨?","fundType",FUND_TYPES,nextInFlow,true),
      () => askSelect("××” ×©× ×”×—×‘×¨×”?","company",INVESTMENT_COMPANIES,nextInFlow,true),
      () => askSelect("××” ××¡×œ×•×œ ×”×”×©×§×¢×”?","investment",TRACKS,nextInFlow,true),
      () => askSelect("××” ×“××™ ×”× ×™×”×•×œ?","fees",FEES,()=>{
        // ×× ×–×” ×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×” â€“ ×œ×©××•×œ ×”×•×¨××ª ×§×‘×¢/×—×“ ×¤×¢××™/×›×œ×•×
        if(data.fundType === "×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”"){
          nextInFlow();
        } else {
          save();
        }
      }),
      () => askSelect("×‘×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”: ×”×× ×™×© ×”×•×¨××ª ×§×‘×¢ / ×”×¢×‘×¨×” ×—×“ ×¤×¢××™×ª / ×›×œ×•×?","kgiPayType",KGI_PAY_OPTIONS,()=>{
        if(data.kgiPayType === "×”×•×¨××ª ×§×‘×¢"){
          askInput("××” ×”×¡×›×•× (×œ×“×•×’××” 1000)?","kgiAmount",false,save);
        } else if(data.kgiPayType === "×”×¢×‘×¨×” ×—×“ ×¤×¢××™×ª"){
          askInput("××” ×”×¡×›×•× (×œ×“×•×’××” 10000)?","kgiAmount",false,save);
        } else {
          save();
        }
      })
    ];
    return;
  }

  // ×¤×¨×˜
  if(data.action === "×¤×¨×˜"){
    flow = [
      () => askSelect("××” ×¡×•×’ ×”×¤×•×œ×™×¡×”?","policyType",PRIVATE_POLICIES,nextInFlow,false),
      () => askSelect("××” ×œ×‘×¦×¢ ×‘×¤×•×œ×™×¡×”?","policyAction",PRIVATE_ACTIONS,nextInFlow,false),
      () => askSelect("××” ×©× ×—×‘×¨×ª ×”×‘×™×˜×•×—?","company",INSURANCE_COMPANIES,nextInFlow,false),
      () => {
        if(data.policyAction === "×œ×”×¤×™×§ ×—×“×©"){
          askInput("××” ×”×¤×¨××™×” ×”×—×•×“×©×™×ª?","monthlyPremium",false,save);
        } else {
          askInput("××” ××¡×¤×¨ ×”×¤×•×œ×™×¡×”?","policyNumber",false,save);
        }
      }
    ];
  }
}

/* =======================
   OUTPUT HELPERS
======================= */

function normalizeTrackForOutput(track){
  // ××™×¤×•×™×™× ××™×•×—×“×™× ×œ×¤×œ×˜
  if(track === "×”×©×œ×•×© ×”×§×“×•×©") return "33% ××©×•×œ×‘ ×¡×—×™×¨ 33% ××“×“×™ ×× ×™×•×ª 34% snp500";
  if(track === "×—×¦×™ ×—×¦×™ ×× ×œ×™×¡×˜") return "50% ×¢×•×§×‘ ××“×“×™× ×’××™×© 50% snp500";
  return track;
}

/* =======================
   SAVE / BUILD LINE
======================= */

function save(){
  const prefix = total > 1 ? `${current}. ` : "";
  let line = prefix;

  if(data.action === "×¤×¨×˜"){
    if(data.policyAction === "×œ×‘×˜×œ"){
      line += `${data.policyType} ×‘×—×‘×¨×ª ${data.company} ××¡×¤×¨ ×¤×•×œ×™×¡×” ${data.policyNumber} â€“ ×ª×‘×•×˜×œ`;
    } else if(data.policyAction === "×œ×”×©××™×¨"){
      line += `${data.policyType} ×‘×—×‘×¨×ª ${data.company} ××¡×¤×¨ ×¤×•×œ×™×¡×” ${data.policyNumber} â€“ ×ª×™×©××¨`;
    } else {
      line += `×ª×•×¤×§ ×¤×•×œ×™×¡×” ×—×“×©×” ×©×œ ${data.policyType} ×‘×—×‘×¨×ª ${data.company} ×‘×¤×¨××™×” ×—×•×“×©×™×ª ×©×œ ${data.monthlyPremium} â‚ª`;
    }
  }

  if(data.action === "× ×™×•×“"){
    const inv = normalizeTrackForOutput(data.investment);
    line += `${data.company} ${data.fundType} ××¡×¤×¨ ×§×•×¤×” ${data.fundNumber}- ×ª× ×•×™×“ ×œ×—×‘×¨×ª ${data.targetCompany} ×›××©×¨ ×”×›×¡×£ ×™×•×©×§×¢ ×‘××¡×œ×•×œ ×”×©×§×¢×” ${inv} ×‘×“××™ × ×™×”×•×œ ${data.fees}`;
  }

  if(data.action === "×”×©××¨×”"){
    if(data.hasChange === "×œ×"){
      line += `${data.company} ${data.fundType} ××¡×¤×¨ ×§×•×¤×” ${data.fundNumber} â€“ ×ª×™×©××¨ ×œ×œ× ×©×™× ×•×™`;
    } else {
      const cur = normalizeTrackForOutput(data.currentInvestment);
      const fut = normalizeTrackForOutput(data.futureInvestment);
      line += `${data.company} ${data.fundType} ××¡×¤×¨ ×§×•×¤×” ${data.fundNumber} â€“ ×ª×™×©××¨ ×‘××•×ª×” ×—×‘×¨×” ×›××©×¨ ×™×ª×‘×¦×¢ ×©×™× ×•×™ ××¡×œ×•×œ ×${cur} ×œ${fut}`;
    }
  }

  if(data.action === "×¤×ª×™×—×ª ×§×•×¤×”"){
    const inv = normalizeTrackForOutput(data.investment);
    line += `×¤×ª×™×—×ª ${data.fundType} ×‘×—×‘×¨×ª ${data.company} ×›××©×¨ ×”×›×¡×£ ×™×•×©×§×¢ ×‘××¡×œ×•×œ ×”×©×§×¢×” ${inv} ×‘×“××™ × ×™×”×•×œ ${data.fees}`;

    if(data.fundType === "×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”" && data.kgiPayType && data.kgiPayType !== "××™×Ÿ"){
      const amt = (data.kgiAmount || "").trim();
      if(data.kgiPayType === "×”×•×¨××ª ×§×‘×¢"){
        line += ` ×¢× ×”×•×¨××ª ×§×‘×¢ ×‘×¡×›×•× ×©×œ ${amt} â‚ª ×‘×—×•×“×©`;
      } else {
        line += ` ×¢× ×”×¢×‘×¨×” ×—×“ ×¤×¢××™×ª ×‘×¡×›×•× ×©×œ ${amt} â‚ª`;
      }
    }
  }

  results.push(line);

  // next item or finish
  if(current < total){
    current++;
    data = {};
    chooseAction();
  } else {
    finish();
  }
}

/* =======================
   FINISH
======================= */

function finish(){
  const header = `×‘×”××©×š ×œ×©×™×—×ª× ×•\n×¡×•×›× ×¢×œ ×”×“×‘×¨×™× ×”×‘××™×:\n\n`;
  output.textContent = header + results.join("\n");

  step.style.display = "none";
  nextBtn.style.display = "none";
  output.style.display = "block";
  copyBtn.style.display = "block";
  resetBtn.style.display = "block";

  copyBtn.onclick = () => navigator.clipboard.writeText(output.textContent);
  resetBtn.onclick = () => location.reload();
}
</script>

</body>
</html>