<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>×¡×™×›×•× ×©×™×—×”</title>
  <style>
    body { direction: rtl; font-family: Arial; background:#f5f5f5; padding:20px; }
    .box { background:#fff; max-width:650px; margin:auto; padding:20px; border-radius:8px; }
    label { font-weight:bold; display:block; margin-bottom:6px; }
    input, select, button { width:100%; padding:8px; font-size:16px; margin-bottom:12px; }
    pre { background:#eee; padding:10px; white-space:pre-wrap; }
    .secondary { background:#eee; }
  </style>
</head>
<body>

<div class="box">
  <h2 id="title">××¢×¨×›×ª ×¡×™×›×•× ×©×™×—×”</h2>
  <div id="step"></div>
  <button id="nextBtn">×”××©×š</button>

  <pre id="output" style="display:none;"></pre>
  <button id="copyBtn" style="display:none;">ğŸ“‹ ×”×¢×ª×§</button>
  <button id="resetBtn" class="secondary" style="display:none;">ğŸ” ×¡×™×•×</button>
</div>

<script>
/* ===== × ×ª×•× ×™× ===== */
const companies = [
  "×”×¨××œ","××’×“×œ","×”×¤× ×™×§×¡","×›×œ×œ","××œ×˜×©×•×œ×¨","××™×˜×‘",
  "×× ×œ×™×¡×˜","××™× ×¤×™× ×™×˜×™","×™×œ×™×Ÿ ×œ×¤×™×“×•×ª","××•×¨","×× ×•×¨×”",
  "×§×¨×Ÿ ×”×©×ª×œ××•×ª ×œ×¢×•×‘×“×™ ×”××“×™× ×”"
];

const fundTypes = [
  "×§×•×¤×ª ×’××œ",
  "×§×¨×Ÿ ×”×©×ª×œ××•×ª",
  "×§×¨×Ÿ ×¤× ×¡×™×”",
  "×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”",
  "×¤×•×œ×™×¡×ª ×—×™×¡×›×•×Ÿ"
];

const investmentTracks = [
  "×× ×™×•×ª","Snp500","××©×•×œ×‘ ×¡×—×™×¨","×¢×•×§×‘ ××“×“×™× ×’××™×©",
  "×× ×™×•×ª ×¡×—×™×¨","×¢×•×§×‘ ××“×“×™ ×× ×™×•×ª",
  "50% ×× ×™×•×ª 50% snp500",
  "33% ××©×•×œ×‘ ×¡×—×™×¨ 33% ××“×“×™ ×× ×™×•×ª 34% snp500",
  "50% ×¢×•×§×‘ ××“×“×™× ×’××™×© 50% snp500"
];

const feeOptions = ["0.6%","0.7%","0.8%"];

/* ===== ××¦×‘ ===== */
let totalFunds = 0;
let currentFund = 1;
let stepIndex = 0;
let data = {};
let results = [];

/* ===== ×–×¨×™××” ===== */
const steps = [
  () => askInput("×›××” ×¤×¢×•×œ×•×ª ×¦×¨×™×š ×œ×¨×©×•×?", "count", true),
  () => askSelect("××” ×¡×•×’ ×”×¤×¢×•×œ×”?", "action", ["×œ× ×™×™×“","×œ×”×©××™×¨","×¤×ª×™×—×ª ×§×•×¤×”"]),
  () => {
    if (data.action === "×¤×ª×™×—×ª ×§×•×¤×”") {
      askSelect("××” ×¡×•×’ ×”××•×¦×¨?", "fundType", fundTypes);
    } else {
      askSelect("××” ×¡×•×’ ×”×§×•×¤×”?", "fundType", fundTypes);
    }
  },
  () => askSelect("××” ×©× ×”×—×‘×¨×”?", "company", companies),

  () => {
    if (data.action === "×¤×ª×™×—×ª ×§×•×¤×”") {
      askSelect("××¡×œ×•×œ ×”×©×§×¢×” â€“ ×›××©×¨ ×”×›×¡×£ ×™×•×©×§×¢ ×‘:", "investment", investmentTracks);
    } else {
      askInput("××” ××¡×¤×¨ ×”×§×•×¤×”?", "fundNumber");
    }
  },

  () => {
    if (data.action === "×œ× ×™×™×“") {
      askSelect("×œ××™×–×• ×—×‘×¨×” ×œ× ×™×™×“?", "targetCompany", companies);
    } else if (data.action === "×œ×”×©××™×¨") {
      askSelect("×”×× ×”×•×œ×š ×œ×”×™×•×ª ×©×™× ×•×™?", "hasChange", ["×›×Ÿ","×œ×"]);
    } else {
      askSelect("××” ×“××™ ×”× ×™×”×•×œ?", "fees", feeOptions, true);
    }
  },

  () => {
    if (data.action === "×œ× ×™×™×“") {
      askSelect("××¡×œ×•×œ ×”×©×§×¢×” â€“ ×›××©×¨ ×”×›×¡×£ ×™×•×©×§×¢ ×‘:", "investment", investmentTracks);
    } else if (data.hasChange === "×›×Ÿ") {
      askSelect("×¡×•×’ ×©×™× ×•×™", "changeType", ["×©×™× ×•×™ ××¡×œ×•×œ ×”×©×§×¢×”","××™× ×•×™ ×¡×•×›×Ÿ"]);
    } else {
      saveFund();
    }
  },

  () => {
    if (data.action === "×œ× ×™×™×“") {
      askSelect("××” ×“××™ ×”× ×™×”×•×œ?", "fees", feeOptions, true);
    } else if (data.changeType === "×©×™× ×•×™ ××¡×œ×•×œ ×”×©×§×¢×”") {
      askSelect("××” ××¡×œ×•×œ ×”×”×©×§×¢×” ×¢×›×©×™×•?", "currentInvestment", investmentTracks);
    }
  },

  () => {
    if (data.changeType === "×©×™× ×•×™ ××¡×œ×•×œ ×”×©×§×¢×”") {
      askSelect("×œ××™×–×” ××¡×œ×•×œ ×™×¢×‘×•×¨?", "futureInvestment", investmentTracks);
    }
  },

  () => saveFund()
];

/* ===== ×¤×•× ×§×¦×™×•×ª ===== */
function updateTitle() {
  title.textContent = `×¤×¢×•×œ×” ${currentFund} ××ª×•×š ${totalFunds}`;
}

function askInput(label, key, isFirst=false) {
  updateTitle();
  step.innerHTML = `<label>${label}</label><input id="value">`;
  nextBtn.onclick = () => {
    const v = value.value.trim();
    if (!v) return alert("×™×© ×œ××œ× ×¢×¨×š");
    if (isFirst) {
      totalFunds = parseInt(v,10);
      if (isNaN(totalFunds)||totalFunds<1) return alert("××¡×¤×¨ ×œ× ×ª×§×™×Ÿ");
      next(); return;
    }
    data[key] = v;
    next();
  };
}

function askSelect(label, key, options, autoSave=false) {
  updateTitle();
  step.innerHTML = `
    <label>${label}</label>
    <select id="value">
      ${options.map(o=>`<option>${o}</option>`).join("")}
      <option value="××—×¨">××—×¨</option>
    </select>
    <input id="other" placeholder="××œ×œ ×—×•×¤×©×™" style="display:none">
  `;
  value.onchange = () => other.style.display = value.value==="××—×¨"?"block":"none";
  nextBtn.onclick = () => {
    let v = value.value;
    if (v === "××—×¨") {
      if (!other.value.trim()) return alert("×™×© ×œ××œ×");
      v = other.value.trim();
    }
    data[key] = v;
    autoSave ? saveFund() : next();
  };
}

function next() {
  stepIndex++;
  if (stepIndex < steps.length) steps[stepIndex]();
}

function saveFund() {
  let line = `${currentFund}. `;

  if (data.action === "×¤×ª×™×—×ª ×§×•×¤×”") {
    line += `×¤×ª×™×—×ª ${data.fundType} ×‘×—×‘×¨×ª ${data.company} ×‘××¡×œ×•×œ ${data.investment} ×‘×“××™ × ×™×”×•×œ ${data.fees}`;
  } 
  else if (data.action === "×œ× ×™×™×“") {
    line += `${data.company} ${data.fundType} ××¡×¤×¨ ×§×•×¤×” ${data.fundNumber}- ×ª× ×•×™×“ ×œ×—×‘×¨×ª ${data.targetCompany} ×›××©×¨ ×”×›×¡×£ ×™×•×©×§×¢ ×‘${data.investment} ×‘×“××™ × ×™×”×•×œ ${data.fees}`;
  } 
  else {
    line += `${data.company} ${data.fundType} ××¡×¤×¨ ×§×•×¤×” ${data.fundNumber}- `;
    if (data.hasChange === "×œ×") {
      line += "×ª×™×©××¨ ×œ×œ× ×©×™× ×•×™";
    } else if (data.changeType === "××™× ×•×™ ×¡×•×›×Ÿ") {
      line += "×ª×™×©××¨ ×‘××•×ª×” ×—×‘×¨×” ×¢× ××™× ×•×™ ×¡×•×›×Ÿ";
    } else {
      line += `×ª×™×©××¨ ×‘××•×ª×” ×—×‘×¨×” ×›××©×¨ ×™×ª×‘×¦×¢ ×©×™× ×•×™ ××¡×œ×•×œ ×${data.currentInvestment} ×œ${data.futureInvestment}`;
    }
  }

  results.push(line);

  if (currentFund < totalFunds) {
    currentFund++;
    data = {};
    stepIndex = 1;
    steps[stepIndex]();
  } else {
    finish();
  }
}

function finish() {
  output.textContent = "×¡×™×›×•× ×©×™×—×”:\n\n" + results.join("\n");
  step.style.display = nextBtn.style.display = "none";
  output.style.display = copyBtn.style.display = resetBtn.style.display = "block";
  copyBtn.onclick = () => navigator.clipboard.writeText(output.textContent);
  resetBtn.onclick = () => location.reload();
}

steps[0]();
</script>

</body>
</html>